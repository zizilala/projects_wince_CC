; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\Z2170P\SRC\BOOTLOADER\EBOOT\NAND\cfg.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
	EXPORT	|__$ArrayPad$| [ DATA ]
	EXPORT	|BLReadBootCfg|
	EXPORT	|??_C@_1HE@BDJAOKHO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAR?$AAe?$AAa?$AAd?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IG@EBGBGDAI@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAs?$AAe?$AAc?$AAt?$AAo?$AAr?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe@| [ DATA ] ; `string'
	EXPORT	|??_C@_1EE@MHCJNGAF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAG?$AAe?$AAt?$AAI?$AAn?$AAf?$AAo?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN@| [ DATA ] ; `string'
	EXPORT	|??_C@_1DO@FFNONGBO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	IMPORT	|FMD_Deinit|
	IMPORT	|FMD_ReadSector|
	IMPORT	|FMD_GetBlockStatus|
	IMPORT	|FMD_GetInfo|
	IMPORT	|NKDbgPrintfW|
	IMPORT	|dpCurSettings|
	IMPORT	|FMD_Init|
	IMPORT	|g_ulFlashBase|
	IMPORT	|__GSHandlerCheck|
	IMPORT	|__security_cookie|
	IMPORT	|memcpy|
	IMPORT	|__security_check_cookie|
; File c:\wince600\platform\z2170p\src\bootloader\eboot\nand\cfg.c

  00000			 AREA	 |.pdata|, PDATA
|$T46904| DCD	|$LN23@BLReadBoot|
	DCD	0xc0006303

  00000			 AREA	 |.xdata|, DATA
|$T46900| DCD	0xffffffe4

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HE@BDJAOKHO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAR?$AAe?$AAa?$AAd?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "E", 0x0, "B", 0x0, "O", 0x0, "O", 0x0, "T", 0x0, "!"
	DCB	0x0, "B", 0x0, "L", 0x0, "R", 0x0, "e", 0x0, "a", 0x0, "d"
	DCB	0x0, "B", 0x0, "o", 0x0, "o", 0x0, "t", 0x0, "C", 0x0, "f"
	DCB	0x0, "g", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "l", 0x0, "a"
	DCB	0x0, "s", 0x0, "h", 0x0, " ", 0x0, "s", 0x0, "e", 0x0, "c"
	DCB	0x0, "t", 0x0, "o", 0x0, "r", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "r", 0x0, "e", 0x0, "a", 0x0, "d", 0x0, " "
	DCB	0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IG@EBGBGDAI@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAs?$AAe?$AAc?$AAt?$AAo?$AAr?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "F", 0x0, "l", 0x0, "a", 0x0, "s", 0x0, "h", 0x0, " "
	DCB	0x0, "s", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, "o", 0x0, "r"
	DCB	0x0, " ", 0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, " ", 0x0, "b", 0x0, "y", 0x0, "t"
	DCB	0x0, "e", 0x0, "s", 0x0, " ", 0x0, "b", 0x0, "i", 0x0, "g"
	DCB	0x0, "g", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "t", 0x0, "h"
	DCB	0x0, "a", 0x0, "n", 0x0, " ", 0x0, "s", 0x0, "u", 0x0, "p"
	DCB	0x0, "p", 0x0, "o", 0x0, "r", 0x0, "t", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, "b", 0x0, "y"
	DCB	0x0, "t", 0x0, "e", 0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1EE@MHCJNGAF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAG?$AAe?$AAt?$AAI?$AAn?$AAf?$AAo?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "F", 0x0, "M", 0x0, "D", 0x0, "_", 0x0, "G", 0x0, "e"
	DCB	0x0, "t", 0x0, "I", 0x0, "n", 0x0, "f", 0x0, "o", 0x0, " "
	DCB	0x0, "c", 0x0, "a", 0x0, "l", 0x0, "l", 0x0, " ", 0x0, "f"
	DCB	0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d", 0x0, "!"
	DCB	0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0	; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1DO@FFNONGBO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "F", 0x0, "M", 0x0, "D", 0x0, "_", 0x0, "I", 0x0, "n"
	DCB	0x0, "i", 0x0, "t", 0x0, " ", 0x0, "c", 0x0, "a", 0x0, "l"
	DCB	0x0, "l", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l"
	DCB	0x0, "e", 0x0, "d", 0x0, "!", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__GSHandlerCheck|
  00004	00000000	 DCD         |$T46900|

  00008		 |BLReadBootCfg| PROC

; 30   : {

  00008		 |$LN23@BLReadBoot|
  00008	e92d41f0	 stmdb       sp!, {r4 - r8, lr}
  0000c	e59fc17c	 ldr         r12, [pc, #0x17C]
  00010	e08dd00c	 add         sp, sp, r12
  00014		 |$M46901|
  00014	e1a07000	 mov         r7, r0
  00018	e59f316c	 ldr         r3, [pc, #0x16C]
  0001c	e5933000	 ldr         r3, [r3]
  00020	e58d3b98	 str         r3, [sp, #0xB98]

; 31   :     BOOL rc = FALSE;
; 32   :     HANDLE hFMD;
; 33   :     PCI_REG_INFO regInfo;
; 34   :     FlashInfo flashInfo;
; 35   :     SectorInfo sectorInfo;
; 36   :     SECTOR_ADDR sector;
; 37   :     BLOCK_ID block;
; 38   :     UINT32 count, offset;
; 39   :     UINT8 buffer[2048];
; 40   :     
; 41   : 
; 42   :     // EBOOT configuration is placed in last sector of EBOOT image
; 43   :     regInfo.MemBase.Reg[0] = g_ulFlashBase;

  00024	e59f315c	 ldr         r3, [pc, #0x15C]

; 44   :     hFMD = FMD_Init(NULL, &regInfo, NULL);

  00028	e3a02000	 mov         r2, #0
  0002c	e28d1018	 add         r1, sp, #0x18
  00030	e5933000	 ldr         r3, [r3]
  00034	e3a00000	 mov         r0, #0
  00038	e3a06000	 mov         r6, #0
  0003c	e58d3328	 str         r3, [sp, #0x328]
  00040	eb000000	 bl          FMD_Init
  00044	e1b08000	 movs        r8, r0

; 45   :     if (hFMD == NULL)

  00048	1a000006	 bne         |$LN8@BLReadBoot|

; 46   :         {
; 47   :         OALMSG(OAL_ERROR, (L"ERROR: FMD_Init call failed!\r\n"));

  0004c	e59f3124	 ldr         r3, [pc, #0x124]
  00050	e5933440	 ldr         r3, [r3, #0x440]
  00054	e3130001	 tst         r3, #1
  00058	0a00003d	 beq         |$LN1@BLReadBoot|
  0005c	e59f0120	 ldr         r0, [pc, #0x120]
  00060	eb000000	 bl          NKDbgPrintfW

; 48   :         goto cleanUp;

  00064	ea00003a	 b           |$LN1@BLReadBoot|
  00068		 |$LN8@BLReadBoot|

; 49   :         }
; 50   : 
; 51   :     // Get flash info
; 52   :     if (!FMD_GetInfo(&flashInfo))

  00068	e28d0000	 add         r0, sp, #0
  0006c	eb000000	 bl          FMD_GetInfo
  00070	e3500000	 cmp         r0, #0
  00074	1a000006	 bne         |$LN7@BLReadBoot|

; 53   :         {
; 54   :         OALMSG(OAL_ERROR, (L"ERROR: FMD_GetInfo call failed!\r\n"));

  00078	e59f30f8	 ldr         r3, [pc, #0xF8]
  0007c	e5933440	 ldr         r3, [r3, #0x440]
  00080	e3130001	 tst         r3, #1
  00084	0a000030	 beq         |$cleanUp$46738|
  00088	e59f00f0	 ldr         r0, [pc, #0xF0]
  0008c	eb000000	 bl          NKDbgPrintfW

; 55   :         goto cleanUp;

  00090	ea00002d	 b           |$cleanUp$46738|
  00094		 |$LN7@BLReadBoot|

; 56   :         }
; 57   : 
; 58   :     // We can support only flash with sector size < 2048 bytes
; 59   :     if (flashInfo.wDataBytesPerSector > sizeof(buffer))

  00094	e1dd10be	 ldrh        r1, [sp, #0xE]
  00098	e3510b02	 cmp         r1, #2, 22
  0009c	9a000007	 bls         |$LN6@BLReadBoot|

; 60   :         {
; 61   :         OALMSG(OAL_ERROR, (L"ERROR: "
; 62   :             L"Flash sector size %d bytes bigger than supported %d bytes\r\n",
; 63   :             flashInfo.wDataBytesPerSector, sizeof(buffer)    
; 64   :             ));

  000a0	e59f30d0	 ldr         r3, [pc, #0xD0]
  000a4	e5933440	 ldr         r3, [r3, #0x440]
  000a8	e3130001	 tst         r3, #1
  000ac	0a000026	 beq         |$cleanUp$46738|
  000b0	e59f00c4	 ldr         r0, [pc, #0xC4]
  000b4	e3a02b02	 mov         r2, #2, 22
  000b8	eb000000	 bl          NKDbgPrintfW

; 65   :         goto cleanUp;

  000bc	ea000022	 b           |$cleanUp$46738|
  000c0		 |$LN6@BLReadBoot|

; 66   :         }
; 67   : 
; 68   :     // Configuration is located in last sector of EBOOT image
; 69   :     offset = IMAGE_XLDR_BOOTSEC_NAND_SIZE + IMAGE_EBOOT_BOOTSEC_NAND_SIZE;
; 70   :     
; 71   :     // Start from beginning
; 72   :     block  = 0;

  000c0	e3a04000	 mov         r4, #0

; 73   :     sector = 0;
; 74   : 
; 75   :     // Skip X-Loader & EBOOT code & bad blocks
; 76   :     // Note that we also check the last eboot block in order to ensure it is good
; 77   :     count = 0;

  000c4	e3a05000	 mov         r5, #0
  000c8		 |$LL5@BLReadBoot|

; 78   :     while ((count < offset) && (block < flashInfo.dwNumBlocks))

  000c8	e59d3004	 ldr         r3, [sp, #4]
  000cc	e1540003	 cmp         r4, r3
  000d0	2a000007	 bcs         |$LN4@BLReadBoot|

; 79   :         {
; 80   :         if ((FMD_GetBlockStatus(block) & BLOCK_STATUS_BAD) == 0)

  000d4	e1a00004	 mov         r0, r4
  000d8	eb000000	 bl          FMD_GetBlockStatus
  000dc	e3100002	 tst         r0, #2

; 81   :             {
; 82   :             count += flashInfo.dwBytesPerBlock;

  000e0	059d3008	 ldreq       r3, [sp, #8]

; 83   :             }
; 84   :         block++;

  000e4	e2844001	 add         r4, r4, #1
  000e8	00855003	 addeq       r5, r5, r3
  000ec	e3550703	 cmp         r5, #3, 14
  000f0	3afffff4	 bcc         |$LL5@BLReadBoot|
  000f4		 |$LN4@BLReadBoot|

; 85   :         }
; 86   : 
; 87   :     // We've incremented past the last eboot block in order to check it too
; 88   :     // Back up now, the previous block is the last one containing eboot and is good
; 89   :     block--;
; 90   : 
; 91   :     //  Compute sector within the block where config lies
; 92   :     sector = block * flashInfo.wSectorsPerBlock;
; 93   :     sector += flashInfo.wSectorsPerBlock - 1;
; 94   : 
; 95   :     // Read sector to buffer
; 96   :     if (!FMD_ReadSector(sector, buffer, &sectorInfo, 1)) {

  000f4	e1dd10bc	 ldrh        r1, [sp, #0xC]
  000f8	e3a03001	 mov         r3, #1
  000fc	e28d2010	 add         r2, sp, #0x10
  00100	e0040491	 mul         r4, r1, r4
  00104	e28d1fe6	 add         r1, sp, #0xE6, 30
  00108	e2440001	 sub         r0, r4, #1
  0010c	eb000000	 bl          FMD_ReadSector
  00110	e3500000	 cmp         r0, #0
  00114	1a000007	 bne         |$LN2@BLReadBoot|

; 97   :         OALMSG(OAL_ERROR, (L"ERROR: EBOOT!BLReadBootCfg: "
; 98   :             L"Flash sector %d read failed\r\n", sector
; 99   :         ));

  00118	e59f3058	 ldr         r3, [pc, #0x58]
  0011c	e5933440	 ldr         r3, [r3, #0x440]
  00120	e3130001	 tst         r3, #1
  00124	0a000008	 beq         |$cleanUp$46738|
  00128	e59f0044	 ldr         r0, [pc, #0x44]
  0012c	e2441001	 sub         r1, r4, #1
  00130	eb000000	 bl          NKDbgPrintfW

; 100  :             goto cleanUp;

  00134	ea000004	 b           |$cleanUp$46738|
  00138		 |$LN2@BLReadBoot|

; 101  :     }
; 102  : 
; 103  :     // Copy data to BOOT_CFG structure
; 104  :     memcpy(pBootCfg, buffer, sizeof(BOOT_CFG));        

  00138	e28d1fe6	 add         r1, sp, #0xE6, 30
  0013c	e3a02080	 mov         r2, #0x80
  00140	e1a00007	 mov         r0, r7
  00144	eb000000	 bl          memcpy

; 105  : 
; 106  :     // Done    
; 107  :     rc = TRUE;

  00148	e3a06001	 mov         r6, #1
  0014c		 |$cleanUp$46738|

; 108  : 
; 109  : cleanUp:
; 110  :     if (hFMD != NULL) FMD_Deinit(hFMD);

  0014c	e1a00008	 mov         r0, r8
  00150	eb000000	 bl          FMD_Deinit
  00154		 |$LN1@BLReadBoot|

; 111  :     return rc;

  00154	e59d0b98	 ldr         r0, [sp, #0xB98]
  00158	eb000000	 bl          __security_check_cookie

; 112  : }

  0015c	e1a00006	 mov         r0, r6
  00160	e3a0cc0b	 mov         r12, #0xB, 24
  00164	e38cc09c	 orr         r12, r12, #0x9C
  00168	e08dd00c	 add         sp, sp, r12
  0016c	e8bd41f0	 ldmia       sp!, {r4 - r8, lr}
  00170	e12fff1e	 bx          lr
  00174		 |$LN24@BLReadBoot|
  00174		 |$LN25@BLReadBoot|
  00174	00000000	 DCD         |??_C@_1HE@BDJAOKHO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAR?$AAe?$AAa?$AAd?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs@|
  00178		 |$LN26@BLReadBoot|
  00178	00000000	 DCD         |dpCurSettings|
  0017c		 |$LN27@BLReadBoot|
  0017c	00000000	 DCD         |??_C@_1IG@EBGBGDAI@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAs?$AAe?$AAc?$AAt?$AAo?$AAr?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe@|
  00180		 |$LN28@BLReadBoot|
  00180	00000000	 DCD         |??_C@_1EE@MHCJNGAF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAG?$AAe?$AAt?$AAI?$AAn?$AAf?$AAo?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN@|
  00184		 |$LN29@BLReadBoot|
  00184	00000000	 DCD         |??_C@_1DO@FFNONGBO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@|
  00188		 |$LN30@BLReadBoot|
  00188	00000000	 DCD         |g_ulFlashBase|
  0018c		 |$LN31@BLReadBoot|
  0018c	00000000	 DCD         |__security_cookie|
  00190		 |$LN32@BLReadBoot|
  00190	fffff464	 DCD         0xfffff464
  00194		 |$M46902|

			 ENDP  ; |BLReadBootCfg|

	EXPORT	|__$ArrayPad$| [ DATA ]
	EXPORT	|BLWriteBootCfg|
	EXPORT	|??_C@_1HI@NMGONLPH@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HG@CNPKAHCG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IE@IPHMEIA@?$AA?$AN?$AA?6?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF@| [ DATA ] ; `string'
	EXPORT	|??_C@_1IG@GHABCEAA@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAs?$AAe?$AAc?$AAt?$AAo?$AAr?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe@| [ DATA ] ; `string'
	IMPORT	|FMD_WriteSector|
	IMPORT	|FMD_EraseBlock|
	IMPORT	|memset|

  00000			 AREA	 |.pdata|, PDATA
|$T46962| DCD	|$LN40@BLWriteBoo|
	DCD	0xc000a502

  00000			 AREA	 |.xdata|, DATA
|$T46958| DCD	0xffffffd8

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HI@NMGONLPH@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "E", 0x0, "B", 0x0, "O", 0x0, "O", 0x0, "T", 0x0, "!"
	DCB	0x0, "B", 0x0, "L", 0x0, "W", 0x0, "r", 0x0, "i", 0x0, "t"
	DCB	0x0, "e", 0x0, "B", 0x0, "o", 0x0, "o", 0x0, "t", 0x0, "C"
	DCB	0x0, "f", 0x0, "g", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "l"
	DCB	0x0, "a", 0x0, "s", 0x0, "h", 0x0, " ", 0x0, "s", 0x0, "e"
	DCB	0x0, "c", 0x0, "t", 0x0, "o", 0x0, "r", 0x0, " ", 0x0, "%"
	DCB	0x0, "d", 0x0, " ", 0x0, "w", 0x0, "r", 0x0, "i", 0x0, "t"
	DCB	0x0, "e", 0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l"
	DCB	0x0, "e", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HG@CNPKAHCG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "E", 0x0, "B", 0x0, "O", 0x0, "O", 0x0, "T", 0x0, "!"
	DCB	0x0, "B", 0x0, "L", 0x0, "W", 0x0, "r", 0x0, "i", 0x0, "t"
	DCB	0x0, "e", 0x0, "B", 0x0, "o", 0x0, "o", 0x0, "t", 0x0, "C"
	DCB	0x0, "f", 0x0, "g", 0x0, ":", 0x0, " ", 0x0, "F", 0x0, "l"
	DCB	0x0, "a", 0x0, "s", 0x0, "h", 0x0, " ", 0x0, "b", 0x0, "l"
	DCB	0x0, "o", 0x0, "c", 0x0, "k", 0x0, " ", 0x0, "%", 0x0, "d"
	DCB	0x0, " ", 0x0, "e", 0x0, "r", 0x0, "a", 0x0, "s", 0x0, "e"
	DCB	0x0, " ", 0x0, "f", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e"
	DCB	0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IE@IPHMEIA@?$AA?$AN?$AA?6?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF@| DCB 0xd
	DCB	0x0, 0xa, 0x0, "E", 0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R"
	DCB	0x0, ":", 0x0, " ", 0x0, "E", 0x0, "B", 0x0, "O", 0x0, "O"
	DCB	0x0, "T", 0x0, "!", 0x0, "B", 0x0, "L", 0x0, "W", 0x0, "r"
	DCB	0x0, "i", 0x0, "t", 0x0, "e", 0x0, "B", 0x0, "o", 0x0, "o"
	DCB	0x0, "t", 0x0, "C", 0x0, "f", 0x0, "g", 0x0, ":", 0x0, " "
	DCB	0x0, "F", 0x0, "a", 0x0, "i", 0x0, "l", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "r", 0x0, "e", 0x0, "a", 0x0, "d", 0x0, " "
	DCB	0x0, "s", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, "o", 0x0, "r"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, "f", 0x0, "r"
	DCB	0x0, "o", 0x0, "m", 0x0, " ", 0x0, "f", 0x0, "l", 0x0, "a"
	DCB	0x0, "s", 0x0, "h", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1IG@GHABCEAA@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAs?$AAe?$AAc?$AAt?$AAo?$AAr?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe@| DCB "E"
	DCB	0x0, "R", 0x0, "R", 0x0, "O", 0x0, "R", 0x0, ":", 0x0, " "
	DCB	0x0, "F", 0x0, "l", 0x0, "a", 0x0, "s", 0x0, "h", 0x0, " "
	DCB	0x0, "s", 0x0, "e", 0x0, "c", 0x0, "t", 0x0, "o", 0x0, "r"
	DCB	0x0, " ", 0x0, "s", 0x0, "i", 0x0, "z", 0x0, "e", 0x0, " "
	DCB	0x0, "%", 0x0, "d", 0x0, " ", 0x0, "b", 0x0, "y", 0x0, "t"
	DCB	0x0, "e", 0x0, "s", 0x0, " ", 0x0, "b", 0x0, "i", 0x0, "g"
	DCB	0x0, "g", 0x0, "e", 0x0, "r", 0x0, " ", 0x0, "t", 0x0, "h"
	DCB	0x0, "a", 0x0, "t", 0x0, " ", 0x0, "s", 0x0, "u", 0x0, "p"
	DCB	0x0, "p", 0x0, "o", 0x0, "r", 0x0, "t", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "%", 0x0, "d", 0x0, " ", 0x0, "b", 0x0, "y"
	DCB	0x0, "t", 0x0, "e", 0x0, "s", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__GSHandlerCheck|
  00004	00000000	 DCD         |$T46958|

  00008		 |BLWriteBootCfg| PROC

; 120  : {

  00008		 |$LN40@BLWriteBoo|
  00008	e92d4ff0	 stmdb       sp!, {r4 - r11, lr}
  0000c	e24ddfe7	 sub         sp, sp, #0xE7, 30
  00010		 |$M46959|
  00010	e1a0a000	 mov         r10, r0
  00014	e59f327c	 ldr         r3, [pc, #0x27C]
  00018	e5933000	 ldr         r3, [r3]
  0001c	e58d3398	 str         r3, [sp, #0x398]

; 121  :     BOOL rc = FALSE;
; 122  :     HANDLE hFMD;
; 123  :     PCI_REG_INFO regInfo;
; 124  :     FlashInfo flashInfo;
; 125  :     SectorInfo sectorInfo;
; 126  :     SECTOR_ADDR sector;
; 127  :     BLOCK_ID block;
; 128  :     UINT32 count, offset, length;
; 129  :     UINT8 buffer[2048];
; 130  :     UINT8 *pEBOOT;
; 131  :     
; 132  : 
; 133  :     // EBOOT configuration is placed in last sector of image
; 134  :     regInfo.MemBase.Reg[0] = g_ulFlashBase;

  00020	e59f326c	 ldr         r3, [pc, #0x26C]

; 135  :     hFMD = FMD_Init(NULL, &regInfo, NULL);

  00024	e3a02000	 mov         r2, #0
  00028	e28d1018	 add         r1, sp, #0x18
  0002c	e5933000	 ldr         r3, [r3]
  00030	e3a00000	 mov         r0, #0
  00034	e3a08000	 mov         r8, #0
  00038	e58d3328	 str         r3, [sp, #0x328]
  0003c	eb000000	 bl          FMD_Init
  00040	e1b0b000	 movs        r11, r0

; 136  :     if (hFMD == NULL)

  00044	1a000006	 bne         |$LN14@BLWriteBoo|

; 137  :         {
; 138  :         OALMSG(OAL_ERROR, (L"ERROR: FMD_Init call failed!\r\n"));

  00048	e59f322c	 ldr         r3, [pc, #0x22C]
  0004c	e5933440	 ldr         r3, [r3, #0x440]
  00050	e3130001	 tst         r3, #1
  00054	0a000079	 beq         |$LN1@BLWriteBoo|
  00058	e59f0230	 ldr         r0, [pc, #0x230]
  0005c	eb000000	 bl          NKDbgPrintfW

; 139  :         goto cleanUp;

  00060	ea000076	 b           |$LN1@BLWriteBoo|
  00064		 |$LN14@BLWriteBoo|

; 140  :         }
; 141  : 
; 142  :     // Get flash info
; 143  :     if (!FMD_GetInfo(&flashInfo))

  00064	e28d0008	 add         r0, sp, #8
  00068	eb000000	 bl          FMD_GetInfo
  0006c	e3500000	 cmp         r0, #0
  00070	1a000006	 bne         |$LN13@BLWriteBoo|

; 144  :         {
; 145  :         OALMSG(OAL_ERROR, (L"ERROR: FMD_GetInfo call failed!\r\n"));

  00074	e59f3200	 ldr         r3, [pc, #0x200]
  00078	e5933440	 ldr         r3, [r3, #0x440]
  0007c	e3130001	 tst         r3, #1
  00080	0a00006c	 beq         |$cleanUp$46775|
  00084	e59f0200	 ldr         r0, [pc, #0x200]
  00088	eb000000	 bl          NKDbgPrintfW

; 146  :         goto cleanUp;

  0008c	ea000069	 b           |$cleanUp$46775|
  00090		 |$LN13@BLWriteBoo|

; 147  :         }
; 148  : 
; 149  :     // We can support only flash with sector size which fit to our buffer
; 150  :     if (flashInfo.wDataBytesPerSector > sizeof(buffer))

  00090	e1dd11b6	 ldrh        r1, [sp, #0x16]
  00094	e3510b02	 cmp         r1, #2, 22
  00098	9a000007	 bls         |$LN12@BLWriteBoo|

; 151  :         {
; 152  :         OALMSG(OAL_ERROR, (L"ERROR: "
; 153  :             L"Flash sector size %d bytes bigger that supported %d bytes\r\n",
; 154  :             flashInfo.wDataBytesPerSector, sizeof(buffer)    
; 155  :             ));

  0009c	e59f31d8	 ldr         r3, [pc, #0x1D8]
  000a0	e5933440	 ldr         r3, [r3, #0x440]
  000a4	e3130001	 tst         r3, #1
  000a8	0a000062	 beq         |$cleanUp$46775|
  000ac	e59f01d4	 ldr         r0, [pc, #0x1D4]
  000b0	e3a02b02	 mov         r2, #2, 22
  000b4	eb000000	 bl          NKDbgPrintfW

; 156  :         goto cleanUp;

  000b8	ea00005e	 b           |$cleanUp$46775|
  000bc		 |$LN12@BLWriteBoo|

; 157  :         }
; 158  : 
; 159  :     // Configuration is located in last sector of last EBOOT block
; 160  :     offset = IMAGE_XLDR_BOOTSEC_NAND_SIZE + IMAGE_EBOOT_BOOTSEC_NAND_SIZE;
; 161  :     
; 162  :     // Skip X-Loader & EBOOT code & bad blocks
; 163  :     // Note that we also check the last eboot block in order to ensure it is good
; 164  :     block  = 0;
; 165  :     count = 0;

  000bc	e59d1010	 ldr         r1, [sp, #0x10]
  000c0	e3a04000	 mov         r4, #0
  000c4	e3a05000	 mov         r5, #0
  000c8		 |$LL11@BLWriteBoo|

; 166  :     while ((count < offset) && (block < flashInfo.dwNumBlocks))

  000c8	e59d300c	 ldr         r3, [sp, #0xC]
  000cc	e1540003	 cmp         r4, r3
  000d0	2a000007	 bcs         |$LN10@BLWriteBoo|

; 167  :         {
; 168  :         if ((FMD_GetBlockStatus(block) & BLOCK_STATUS_BAD) == 0)

  000d4	e1a00004	 mov         r0, r4
  000d8	eb000000	 bl          FMD_GetBlockStatus
  000dc	e59d1010	 ldr         r1, [sp, #0x10]
  000e0	e3100002	 tst         r0, #2

; 169  :             {
; 170  :             count += flashInfo.dwBytesPerBlock;
; 171  :             }
; 172  :         block++;

  000e4	e2844001	 add         r4, r4, #1
  000e8	00855001	 addeq       r5, r5, r1
  000ec	e3550703	 cmp         r5, #3, 14
  000f0	3afffff4	 bcc         |$LL11@BLWriteBoo|
  000f4		 |$LN10@BLWriteBoo|

; 173  :         }
; 174  : 
; 175  :     // We've incremented past the last eboot block in order to check it too
; 176  :     // Back up now, the previous block is the last one containing eboot and is good
; 177  :     block--;
; 178  : 
; 179  :     // Need to copy off the block contents to RAM (minus the config sector)
; 180  :     pEBOOT = (UINT8*)IMAGE_WINCE_CODE_CA;
; 181  :     length = flashInfo.dwBytesPerBlock - flashInfo.wDataBytesPerSector;

  000f4	e1dd31b6	 ldrh        r3, [sp, #0x16]
  000f8	e3a00102	 mov         r0, #2, 2

; 182  : 
; 183  :     memset((VOID*)pEBOOT, 0xFF, flashInfo.dwBytesPerBlock);

  000fc	e1a02001	 mov         r2, r1
  00100	e0417003	 sub         r7, r1, r3
  00104	e3a010ff	 mov         r1, #0xFF
  00108	e3800a02	 orr         r0, r0, #2, 20
  0010c	e2446001	 sub         r6, r4, #1
  00110	eb000000	 bl          memset

; 184  :     sector = block * flashInfo.wSectorsPerBlock;

  00114	e1dd31b4	 ldrh        r3, [sp, #0x14]

; 185  :     offset = 0;
; 186  : 
; 187  :     while (offset < length) 

  00118	e3e021fe	 mvn         r2, #0xFE, 2
  0011c	e3a04000	 mov         r4, #0
  00120	e0050693	 mul         r5, r3, r6
  00124	e2229d7f	 eor         r9, r2, #0x7F, 26
  00128	e3570000	 cmp         r7, #0
  0012c	0a00000b	 beq         |$LN7@BLWriteBoo|
  00130		 |$LL8@BLWriteBoo|

; 188  :     {
; 189  :         // When block read fail, there isn't what we can do more
; 190  :         if (!FMD_ReadSector(sector, pEBOOT + offset, &sectorInfo, 1)) {

  00130	e3a03001	 mov         r3, #1
  00134	e28d2000	 add         r2, sp, #0
  00138	e0441009	 sub         r1, r4, r9
  0013c	e1a00005	 mov         r0, r5
  00140	eb000000	 bl          FMD_ReadSector
  00144	e3500000	 cmp         r0, #0
  00148	0a000014	 beq         |$LN32@BLWriteBoo|

; 195  :             }
; 196  : 
; 197  :         // Move to next sector
; 198  :         sector++;
; 199  :         offset += flashInfo.wDataBytesPerSector;

  0014c	e1dd31b6	 ldrh        r3, [sp, #0x16]
  00150	e2855001	 add         r5, r5, #1
  00154	e0844003	 add         r4, r4, r3
  00158	e1540007	 cmp         r4, r7
  0015c	3afffff3	 bcc         |$LL8@BLWriteBoo|
  00160		 |$LN7@BLWriteBoo|

; 200  :     }
; 201  : 
; 202  : 
; 203  :     //  Copy the config info into last sector of saved block in RAM
; 204  :     memcpy(pEBOOT + offset, pBootCfg, sizeof(BOOT_CFG)); 

  00160	e0440009	 sub         r0, r4, r9
  00164	e3a02080	 mov         r2, #0x80
  00168	e1a0100a	 mov         r1, r10
  0016c	eb000000	 bl          memcpy

; 205  : 
; 206  : 
; 207  :     // Erase block
; 208  :     if (!FMD_EraseBlock(block))

  00170	e1a00006	 mov         r0, r6
  00174	eb000000	 bl          FMD_EraseBlock
  00178	e3500000	 cmp         r0, #0
  0017c	1a00000f	 bne         |$LN5@BLWriteBoo|

; 209  :         {
; 210  :         OALMSG(OAL_ERROR, (L"ERROR: EBOOT!BLWriteBootCfg: "
; 211  :             L"Flash block %d erase failed\r\n", block
; 212  :             ));

  00180	e59f30f4	 ldr         r3, [pc, #0xF4]
  00184	e5933440	 ldr         r3, [r3, #0x440]
  00188	e3130001	 tst         r3, #1
  0018c	0a000029	 beq         |$cleanUp$46775|
  00190	e59f00ec	 ldr         r0, [pc, #0xEC]
  00194	e1a01006	 mov         r1, r6
  00198	eb000000	 bl          NKDbgPrintfW
  0019c	ea000025	 b           |$cleanUp$46775|
  001a0		 |$LN32@BLWriteBoo|

; 191  :                 OALMSG(OAL_ERROR, (L"\r\nERROR: EBOOT!BLWriteBootCfg: "
; 192  :                     L"Failed read sector %d from flash\r\n", sector
; 193  :                 ));

  001a0	e59f30d4	 ldr         r3, [pc, #0xD4]
  001a4	e5933440	 ldr         r3, [r3, #0x440]
  001a8	e3130001	 tst         r3, #1
  001ac	0a000021	 beq         |$cleanUp$46775|
  001b0	e59f00c8	 ldr         r0, [pc, #0xC8]
  001b4	e1a01005	 mov         r1, r5
  001b8	eb000000	 bl          NKDbgPrintfW

; 194  :             goto cleanUp;

  001bc	ea00001d	 b           |$cleanUp$46775|
  001c0		 |$LN5@BLWriteBoo|

; 213  :         goto cleanUp;
; 214  :         }
; 215  : 
; 216  : 
; 217  :     // Write contents of the save block + config sector back to flash
; 218  :     pEBOOT = (UINT8*)IMAGE_WINCE_CODE_CA;
; 219  :     length = flashInfo.dwBytesPerBlock;
; 220  : 
; 221  :     sector = block * flashInfo.wSectorsPerBlock;

  001c0	e1dd31b4	 ldrh        r3, [sp, #0x14]
  001c4	e59d7010	 ldr         r7, [sp, #0x10]

; 222  :     offset = 0;

  001c8	e3a05000	 mov         r5, #0
  001cc	e0040693	 mul         r4, r3, r6

; 223  :     while (offset < length)

  001d0	e3570000	 cmp         r7, #0
  001d4	0a000016	 beq         |$LN3@BLWriteBoo|
  001d8	e3e06000	 mvn         r6, #0
  001dc	e3a0a000	 mov         r10, #0
  001e0	e3a0e000	 mov         lr, #0
  001e4		 |$LL4@BLWriteBoo|

; 224  :     {
; 225  :         // Prepare sector info
; 226  :         memset(&sectorInfo, 0xFF, sizeof(sectorInfo));

  001e4	e58d6004	 str         r6, [sp, #4]

; 227  :         sectorInfo.bOEMReserved &= ~(OEM_BLOCK_READONLY|OEM_BLOCK_RESERVED);

  001e8	e5dd3004	 ldrb        r3, [sp, #4]
  001ec	e58d6000	 str         r6, [sp]

; 228  :         sectorInfo.dwReserved1 = 0;
; 229  :         sectorInfo.wReserved2 = 0;
; 230  : 
; 231  :         // Write sector        
; 232  :         if (!FMD_WriteSector(sector, pEBOOT + offset, &sectorInfo, 1))

  001f0	e28d2000	 add         r2, sp, #0
  001f4	e20330fc	 and         r3, r3, #0xFC
  001f8	e5cd3004	 strb        r3, [sp, #4]
  001fc	e3a03001	 mov         r3, #1
  00200	e0451009	 sub         r1, r5, r9
  00204	e1a00004	 mov         r0, r4
  00208	e58da000	 str         r10, [sp]
  0020c	e1cde0b6	 strh        lr, [sp, #6]
  00210	eb000000	 bl          FMD_WriteSector
  00214	e3500000	 cmp         r0, #0
  00218	0a00000e	 beq         |$LN33@BLWriteBoo|

; 237  :             goto cleanUp;
; 238  :             }
; 239  : 
; 240  :         // Move to next sector
; 241  :         sector++;
; 242  :         offset += flashInfo.wDataBytesPerSector;

  0021c	e1dd31b6	 ldrh        r3, [sp, #0x16]
  00220	e2844001	 add         r4, r4, #1
  00224	e3a0e000	 mov         lr, #0
  00228	e0855003	 add         r5, r5, r3
  0022c	e1550007	 cmp         r5, r7
  00230	3affffeb	 bcc         |$LL4@BLWriteBoo|
  00234		 |$LN3@BLWriteBoo|

; 243  :     }
; 244  : 
; 245  :     // Done    
; 246  :     rc = TRUE;

  00234	e3a08001	 mov         r8, #1
  00238		 |$cleanUp$46775|

; 247  : 
; 248  : cleanUp:
; 249  :     if (hFMD != NULL) FMD_Deinit(hFMD);

  00238	e1a0000b	 mov         r0, r11
  0023c	eb000000	 bl          FMD_Deinit
  00240		 |$LN1@BLWriteBoo|

; 250  :     return rc;

  00240	e59d0398	 ldr         r0, [sp, #0x398]
  00244	eb000000	 bl          __security_check_cookie

; 251  : }

  00248	e1a00008	 mov         r0, r8
  0024c	e28ddfe7	 add         sp, sp, #0xE7, 30
  00250	e8bd4ff0	 ldmia       sp!, {r4 - r11, lr}
  00254	e12fff1e	 bx          lr
  00258		 |$LN33@BLWriteBoo|

; 233  :             {
; 234  :             OALMSG(OAL_ERROR, (L"ERROR: EBOOT!BLWriteBootCfg: "
; 235  :                 L"Flash sector %d write failed\r\n", sector
; 236  :                 ));

  00258	e59f301c	 ldr         r3, [pc, #0x1C]
  0025c	e5933440	 ldr         r3, [r3, #0x440]
  00260	e3130001	 tst         r3, #1
  00264	0afffff3	 beq         |$cleanUp$46775|
  00268	e59f0008	 ldr         r0, [pc, #8]
  0026c	e1a01004	 mov         r1, r4
  00270	eb000000	 bl          NKDbgPrintfW
  00274	eaffffef	 b           |$cleanUp$46775|
  00278		 |$LN41@BLWriteBoo|
  00278		 |$LN42@BLWriteBoo|
  00278	00000000	 DCD         |??_C@_1HI@NMGONLPH@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa@|
  0027c		 |$LN43@BLWriteBoo|
  0027c	00000000	 DCD         |dpCurSettings|
  00280		 |$LN44@BLWriteBoo|
  00280	00000000	 DCD         |??_C@_1IE@IPHMEIA@?$AA?$AN?$AA?6?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF@|
  00284		 |$LN45@BLWriteBoo|
  00284	00000000	 DCD         |??_C@_1HG@CNPKAHCG@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAE?$AAB?$AAO?$AAO?$AAT?$AA?$CB?$AAB?$AAL?$AAW?$AAr?$AAi?$AAt?$AAe?$AAB?$AAo?$AAo?$AAt?$AAC?$AAf?$AAg?$AA?3?$AA?5?$AAF?$AAl?$AAa@|
  00288		 |$LN46@BLWriteBoo|
  00288	00000000	 DCD         |??_C@_1IG@GHABCEAA@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAl?$AAa?$AAs?$AAh?$AA?5?$AAs?$AAe?$AAc?$AAt?$AAo?$AAr?$AA?5?$AAs?$AAi?$AAz?$AAe?$AA?5?$AA?$CF?$AAd?$AA?5?$AAb?$AAy?$AAt?$AAe@|
  0028c		 |$LN47@BLWriteBoo|
  0028c	00000000	 DCD         |??_C@_1EE@MHCJNGAF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAG?$AAe?$AAt?$AAI?$AAn?$AAf?$AAo?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN@|
  00290		 |$LN48@BLWriteBoo|
  00290	00000000	 DCD         |??_C@_1DO@FFNONGBO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@|
  00294		 |$LN49@BLWriteBoo|
  00294	00000000	 DCD         |g_ulFlashBase|
  00298		 |$LN50@BLWriteBoo|
  00298	00000000	 DCD         |__security_cookie|
  0029c		 |$M46960|

			 ENDP  ; |BLWriteBootCfg|

	EXPORT	|__$ArrayPad$| [ DATA ]
	EXPORT	|BLReserveBootBlocks|
	EXPORT	|??_C@_15JNBOKNOG@?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_13JOFGPIOO@?$AA?4?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1FG@GECOJCBP@?$AA?5?$AAO?$AAo?$AAp?$AAs?$AA?0?$AA?5?$AAc?$AAa?$AAn?$AA?8?$AAt?$AA?5?$AAm?$AAa?$AAr?$AAk?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?9?$AA?5?$AAa?$AAs?$AA?5@| [ DATA ] ; `string'
	EXPORT	|??_C@_1CK@FKCECPDI@?$AA?5?$AAS?$AAk?$AAi?$AAp?$AA?5?$AAb?$AAa?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| [ DATA ] ; `string'
	EXPORT	|??_C@_1HO@MDILHIPB@?$AAC?$AAh?$AAe?$AAc?$AAk?$AAi?$AAn?$AAg?$AA?5?$AAb?$AAo?$AAo?$AAt?$AAl?$AAo?$AAa?$AAd?$AAe?$AAr?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAa?$AAr?$AAe?$AA?5?$AAm@| [ DATA ] ; `string'
	IMPORT	|FMD_SetBlockStatus|
	IMPORT	|__rt_udiv|

  00000			 AREA	 |.pdata|, PDATA
|$T46999| DCD	|$LN22@BLReserveB|
	DCD	0xc0005902

  00000			 AREA	 |.xdata|, DATA
|$T46995| DCD	0xffffffec

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_15JNBOKNOG@?$AA?$AN?$AA?6?$AA?$AA@| DCB 0xd, 0x0, 0xa, 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_13JOFGPIOO@?$AA?4?$AA?$AA@| DCB ".", 0x0, 0x0, 0x0 ; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1FG@GECOJCBP@?$AA?5?$AAO?$AAo?$AAp?$AAs?$AA?0?$AA?5?$AAc?$AAa?$AAn?$AA?8?$AAt?$AA?5?$AAm?$AAa?$AAr?$AAk?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?9?$AA?5?$AAa?$AAs?$AA?5@| DCB " "
	DCB	0x0, "O", 0x0, "o", 0x0, "p", 0x0, "s", 0x0, ",", 0x0, " "
	DCB	0x0, "c", 0x0, "a", 0x0, "n", 0x0, "'", 0x0, "t", 0x0, " "
	DCB	0x0, "m", 0x0, "a", 0x0, "r", 0x0, "k", 0x0, " ", 0x0, "b"
	DCB	0x0, "l", 0x0, "o", 0x0, "c", 0x0, "k", 0x0, " ", 0x0, "%"
	DCB	0x0, "d", 0x0, " ", 0x0, "-", 0x0, " ", 0x0, "a", 0x0, "s"
	DCB	0x0, " ", 0x0, "r", 0x0, "e", 0x0, "s", 0x0, "e", 0x0, "r"
	DCB	0x0, "v", 0x0, "e", 0x0, "d", 0x0, 0xd, 0x0, 0xa, 0x0, 0x0
	DCB	0x0					; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1CK@FKCECPDI@?$AA?5?$AAS?$AAk?$AAi?$AAp?$AA?5?$AAb?$AAa?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@| DCB " "
	DCB	0x0, "S", 0x0, "k", 0x0, "i", 0x0, "p", 0x0, " ", 0x0, "b"
	DCB	0x0, "a", 0x0, "d", 0x0, " ", 0x0, "b", 0x0, "l", 0x0, "o"
	DCB	0x0, "c", 0x0, "k", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'

  00000			 AREA	 |.rdata|, DATA, READONLY
|??_C@_1HO@MDILHIPB@?$AAC?$AAh?$AAe?$AAc?$AAk?$AAi?$AAn?$AAg?$AA?5?$AAb?$AAo?$AAo?$AAt?$AAl?$AAo?$AAa?$AAd?$AAe?$AAr?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAa?$AAr?$AAe?$AA?5?$AAm@| DCB "C"
	DCB	0x0, "h", 0x0, "e", 0x0, "c", 0x0, "k", 0x0, "i", 0x0, "n"
	DCB	0x0, "g", 0x0, " ", 0x0, "b", 0x0, "o", 0x0, "o", 0x0, "t"
	DCB	0x0, "l", 0x0, "o", 0x0, "a", 0x0, "d", 0x0, "e", 0x0, "r"
	DCB	0x0, " ", 0x0, "b", 0x0, "l", 0x0, "o", 0x0, "c", 0x0, "k"
	DCB	0x0, "s", 0x0, " ", 0x0, "a", 0x0, "r", 0x0, "e", 0x0, " "
	DCB	0x0, "m", 0x0, "a", 0x0, "r", 0x0, "k", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "a", 0x0, "s", 0x0, " ", 0x0, "r", 0x0, "e"
	DCB	0x0, "s", 0x0, "e", 0x0, "r", 0x0, "v", 0x0, "e", 0x0, "d"
	DCB	0x0, " ", 0x0, "(", 0x0, "N", 0x0, "u", 0x0, "m", 0x0, " "
	DCB	0x0, "=", 0x0, " ", 0x0, "%", 0x0, "d", 0x0, ")", 0x0, 0xd
	DCB	0x0, 0xa, 0x0, 0x0, 0x0			; `string'
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000	00000000	 DCD         |__GSHandlerCheck|
  00004	00000000	 DCD         |$T46995|

  00008		 |BLReserveBootBlocks| PROC

; 259  : {

  00008		 |$LN22@BLReserveB|
  00008	e92d4070	 stmdb       sp!, {r4 - r6, lr}
  0000c	e24ddfe5	 sub         sp, sp, #0xE5, 30
  00010		 |$M46996|
  00010	e59f3150	 ldr         r3, [pc, #0x150]
  00014	e5933000	 ldr         r3, [r3]
  00018	e58d3390	 str         r3, [sp, #0x390]

; 260  :     BOOL rc = FALSE;
; 261  :     HANDLE hFMD;
; 262  :     PCI_REG_INFO regInfo;
; 263  :     FlashInfo flashInfo;
; 264  :     UINT32 size;
; 265  :     BLOCK_ID firstblock, lastblock;
; 266  :     UINT32 status;
; 267  :     
; 268  :     UNREFERENCED_PARAMETER(pBootCfg);
; 269  : 
; 270  :     // Automatically mark the bootloader blocks as read-only/reserved
; 271  :     regInfo.MemBase.Reg[0] = g_ulFlashBase;

  0001c	e59f3140	 ldr         r3, [pc, #0x140]

; 272  :     hFMD = FMD_Init(NULL, &regInfo, NULL);

  00020	e3a02000	 mov         r2, #0
  00024	e28d1010	 add         r1, sp, #0x10
  00028	e5933000	 ldr         r3, [r3]
  0002c	e3a00000	 mov         r0, #0
  00030	e3a04000	 mov         r4, #0
  00034	e58d3320	 str         r3, [sp, #0x320]
  00038	eb000000	 bl          FMD_Init
  0003c	e1b06000	 movs        r6, r0

; 273  :     if (hFMD == NULL)

  00040	1a000006	 bne         |$LN8@BLReserveB|

; 274  :         {
; 275  :         OALMSG(OAL_ERROR, (L"ERROR: FMD_Init call failed!\r\n"));

  00044	e59f3110	 ldr         r3, [pc, #0x110]
  00048	e5933440	 ldr         r3, [r3, #0x440]
  0004c	e3130001	 tst         r3, #1
  00050	0a000035	 beq         |$LN1@BLReserveB|
  00054	e59f0104	 ldr         r0, [pc, #0x104]
  00058	eb000000	 bl          NKDbgPrintfW

; 276  :         goto cleanUp;

  0005c	ea000032	 b           |$LN1@BLReserveB|
  00060		 |$LN8@BLReserveB|

; 277  :         }
; 278  : 
; 279  :     // Get flash info
; 280  :     if (!FMD_GetInfo(&flashInfo))

  00060	e28d0000	 add         r0, sp, #0
  00064	eb000000	 bl          FMD_GetInfo
  00068	e3500000	 cmp         r0, #0
  0006c	1a000005	 bne         |$LN7@BLReserveB|

; 281  :         {
; 282  :         OALMSG(OAL_ERROR, (L"ERROR: FMD_GetInfo call failed!\r\n"));

  00070	e59f30e4	 ldr         r3, [pc, #0xE4]
  00074	e5933440	 ldr         r3, [r3, #0x440]
  00078	e3130001	 tst         r3, #1
  0007c	0a000028	 beq         |$cleanUp$46822|
  00080	e59f00d0	 ldr         r0, [pc, #0xD0]

; 283  :         goto cleanUp;

  00084	ea000025	 b           |$LN19@BLReserveB|
  00088		 |$LN7@BLReserveB|

; 284  :         }
; 285  : 
; 286  : 
; 287  :     //  Loop thru the bootloader blocks to ensure they are marked reserved
; 288  :     firstblock = 0;
; 289  :     size = IMAGE_BOOTLOADER_NAND_SIZE;
; 290  :     lastblock = ((size -1) / flashInfo.dwBytesPerBlock) + 1;

  00088	e59d0008	 ldr         r0, [sp, #8]
  0008c	e3e034ff	 mvn         r3, #0xFF, 8
  00090	e2231739	 eor         r1, r3, #0x39, 14
  00094	e3a04000	 mov         r4, #0
  00098	eb000000	 bl          __rt_udiv
  0009c	e2805001	 add         r5, r0, #1

; 291  : 
; 292  :     OALLog(L"Checking bootloader blocks are marked as reserved (Num = %d)\r\n", lastblock-firstblock);

  000a0	e59f00ac	 ldr         r0, [pc, #0xAC]
  000a4	e1a01005	 mov         r1, r5
  000a8	eb000000	 bl          NKDbgPrintfW

; 293  : 
; 294  :     while (firstblock < lastblock)

  000ac	e3550000	 cmp         r5, #0
  000b0	0a000018	 beq         |$LN5@BLReserveB|
  000b4		 |$LL6@BLReserveB|

; 295  :         {
; 296  : 
; 297  :         // If block is bad, we have to offset it
; 298  :         status = FMD_GetBlockStatus(firstblock);

  000b4	e1a00004	 mov         r0, r4
  000b8	eb000000	 bl          FMD_GetBlockStatus

; 299  : 
; 300  :         // Skip bad blocks
; 301  :         if ((status & BLOCK_STATUS_BAD) != 0) 

  000bc	e3100002	 tst         r0, #2
  000c0	0a000005	 beq         |$LN4@BLReserveB|

; 302  :             {
; 303  :             OALLog(L" Skip bad block %d\r\n", firstblock);

  000c4	e59f0084	 ldr         r0, [pc, #0x84]
  000c8	e1a01004	 mov         r1, r4
  000cc	eb000000	 bl          NKDbgPrintfW

; 304  :             // blocks marked bad would not have been written either, so don't include this 
; 305  :             // in the count of blocks that are reserved.
; 306  :             firstblock++;

  000d0	e2844001	 add         r4, r4, #1

; 307  :             lastblock++;

  000d4	e2855001	 add         r5, r5, #1

; 308  :             continue;

  000d8	ea00000c	 b           |$LN18@BLReserveB|
  000dc		 |$LN4@BLReserveB|

; 309  :             }
; 310  : 
; 311  :         // Skip already reserved blocks
; 312  :         if ((status & BLOCK_STATUS_RESERVED) != 0) 

  000dc	e3100008	 tst         r0, #8

; 313  :             {
; 314  :             firstblock++;

  000e0	12844001	 addne       r4, r4, #1
  000e4	1a000009	 bne         |$LN18@BLReserveB|

; 315  :             continue;
; 316  :             }
; 317  : 
; 318  :         // Mark block as read-only & reserved
; 319  :         if (!FMD_SetBlockStatus(firstblock, BLOCK_STATUS_READONLY|BLOCK_STATUS_RESERVED)) 

  000e8	e3a0100c	 mov         r1, #0xC
  000ec	e1a00004	 mov         r0, r4
  000f0	eb000000	 bl          FMD_SetBlockStatus
  000f4	e3500000	 cmp         r0, #0

; 320  :             {
; 321  :             OALLog(L" Oops, can't mark block %d - as reserved\r\n", firstblock);

  000f8	059f004c	 ldreq       r0, [pc, #0x4C]
  000fc	01a01004	 moveq       r1, r4
  00100	0b000000	 bleq        NKDbgPrintfW

; 322  :             }
; 323  : 
; 324  :         firstblock++;
; 325  :         OALLog(L".");

  00104	e59f003c	 ldr         r0, [pc, #0x3C]
  00108	e2844001	 add         r4, r4, #1
  0010c	eb000000	 bl          NKDbgPrintfW
  00110		 |$LN18@BLReserveB|

; 293  : 
; 294  :     while (firstblock < lastblock)

  00110	e1540005	 cmp         r4, r5
  00114	3affffe6	 bcc         |$LL6@BLReserveB|
  00118		 |$LN5@BLReserveB|

; 326  :         }
; 327  : 
; 328  :     // Done    
; 329  :     rc = TRUE;
; 330  : 
; 331  :     OALLog(L"\r\n");

  00118	e59f0024	 ldr         r0, [pc, #0x24]
  0011c	e3a04001	 mov         r4, #1
  00120		 |$LN19@BLReserveB|
  00120	eb000000	 bl          NKDbgPrintfW
  00124		 |$cleanUp$46822|

; 332  : 
; 333  : cleanUp:
; 334  :     if (hFMD != NULL) FMD_Deinit(hFMD);

  00124	e1a00006	 mov         r0, r6
  00128	eb000000	 bl          FMD_Deinit
  0012c		 |$LN1@BLReserveB|

; 335  :     return rc;

  0012c	e59d0390	 ldr         r0, [sp, #0x390]
  00130	eb000000	 bl          __security_check_cookie

; 336  : }

  00134	e1a00004	 mov         r0, r4
  00138	e28ddfe5	 add         sp, sp, #0xE5, 30
  0013c	e8bd4070	 ldmia       sp!, {r4 - r6, lr}
  00140	e12fff1e	 bx          lr
  00144		 |$LN23@BLReserveB|
  00144		 |$LN24@BLReserveB|
  00144	00000000	 DCD         |??_C@_15JNBOKNOG@?$AA?$AN?$AA?6?$AA?$AA@|
  00148		 |$LN25@BLReserveB|
  00148	00000000	 DCD         |??_C@_13JOFGPIOO@?$AA?4?$AA?$AA@|
  0014c		 |$LN26@BLReserveB|
  0014c	00000000	 DCD         |??_C@_1FG@GECOJCBP@?$AA?5?$AAO?$AAo?$AAp?$AAs?$AA?0?$AA?5?$AAc?$AAa?$AAn?$AA?8?$AAt?$AA?5?$AAm?$AAa?$AAr?$AAk?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AA?5?$AA?$CF?$AAd?$AA?5?$AA?9?$AA?5?$AAa?$AAs?$AA?5@|
  00150		 |$LN27@BLReserveB|
  00150	00000000	 DCD         |??_C@_1CK@FKCECPDI@?$AA?5?$AAS?$AAk?$AAi?$AAp?$AA?5?$AAb?$AAa?$AAd?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AA?5?$AA?$CF?$AAd?$AA?$AN?$AA?6?$AA?$AA@|
  00154		 |$LN28@BLReserveB|
  00154	00000000	 DCD         |??_C@_1HO@MDILHIPB@?$AAC?$AAh?$AAe?$AAc?$AAk?$AAi?$AAn?$AAg?$AA?5?$AAb?$AAo?$AAo?$AAt?$AAl?$AAo?$AAa?$AAd?$AAe?$AAr?$AA?5?$AAb?$AAl?$AAo?$AAc?$AAk?$AAs?$AA?5?$AAa?$AAr?$AAe?$AA?5?$AAm@|
  00158		 |$LN29@BLReserveB|
  00158	00000000	 DCD         |??_C@_1EE@MHCJNGAF@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAG?$AAe?$AAt?$AAI?$AAn?$AAf?$AAo?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN@|
  0015c		 |$LN30@BLReserveB|
  0015c	00000000	 DCD         |dpCurSettings|
  00160		 |$LN31@BLReserveB|
  00160	00000000	 DCD         |??_C@_1DO@FFNONGBO@?$AAE?$AAR?$AAR?$AAO?$AAR?$AA?3?$AA?5?$AAF?$AAM?$AAD?$AA_?$AAI?$AAn?$AAi?$AAt?$AA?5?$AAc?$AAa?$AAl?$AAl?$AA?5?$AAf?$AAa?$AAi?$AAl?$AAe?$AAd?$AA?$CB?$AA?$AN?$AA?6?$AA?$AA@|
  00164		 |$LN32@BLReserveB|
  00164	00000000	 DCD         |g_ulFlashBase|
  00168		 |$LN33@BLReserveB|
  00168	00000000	 DCD         |__security_cookie|
  0016c		 |$M46997|

			 ENDP  ; |BLReserveBootBlocks|

	EXPORT	|BLShowLogo|
	IMPORT	|ShowLogo|

  00000			 AREA	 |.pdata|, PDATA
|$T47020| DCD	|$LN5@BLShowLogo|
	DCD	0x40000901
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |BLShowLogo| PROC

; 343  : {

  00000		 |$LN5@BLShowLogo|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M47017|

; 344  :     //  Show the bootloader splashscreen
; 345  :     ShowLogo(g_ulFlashBase, IMAGE_XLDR_BOOTSEC_NAND_SIZE + IMAGE_EBOOT_BOOTSEC_NAND_SIZE);

  00004	e59f3014	 ldr         r3, [pc, #0x14]
  00008	e3a01703	 mov         r1, #3, 14
  0000c	e5930000	 ldr         r0, [r3]
  00010	eb000000	 bl          ShowLogo

; 346  : 
; 347  :     return TRUE;

  00014	e3a00001	 mov         r0, #1

; 348  : }

  00018	e49de004	 ldr         lr, [sp], #4
  0001c	e12fff1e	 bx          lr
  00020		 |$LN6@BLShowLogo|
  00020		 |$LN7@BLShowLogo|
  00020	00000000	 DCD         |g_ulFlashBase|
  00024		 |$M47018|

			 ENDP  ; |BLShowLogo|

	END
