#include <eboot.h>
#include "omap_cpuver.h"





VOID HotKey(BOOL bForced)
{
    UINT32 time, delay = 3;
    WCHAR key;
    HANDLE hGPIO;
		//BOOL entry;
    BSP_ARGS *pArgs = OALCAtoUA(IMAGE_SHARE_ARGS_CA);
    //Let keypad GPIO action.
    hGPIO = GPIOOpen();
    
  
   // First let user break to menu
   //while (!bForced && (delay > 0 && key != L' ')) 
     while (!bForced && (delay > 0 && (key != GPIOSetBit(hGPIO, 114)) &&  (key != GPIOSetBit(hGPIO, 115)) )) //OK?
	{
		OALLog(L"Hit space to enter configuration menu %d...\r\n", delay);
		time = OALGetTickCount();
		while ((OALGetTickCount() - time) < 1000) 
		{
			if ( (key = OALBLMenuReadKey(FALSE)) == (GPIOSetBit(hGPIO, 114) &&  key = OALBLMenuReadKey(FALSE)) ==GPIOSetBit(hGPIO, 115)) ) 
				break;
		}
		delay--;
	}
    //entry = FALSE;
  //if ((bForced == TRUE) || (key == L' ')) 
	if((bForced == TRUE) || (key == GPIOSetBit(hGPIO, 114)) && (key == GPIOSetBit(hGPIO, 115)) )
	{
    BLShowLogo();					//TRUE == Forever go , Ray 13-07-31 
		OALBLMenuShow(&g_menuRoot);
		
		// Invalidate arguments to force them to be reinitialized
        // with new config data generated by the boot menu
		pArgs->header.signature = 0;
    }  
}