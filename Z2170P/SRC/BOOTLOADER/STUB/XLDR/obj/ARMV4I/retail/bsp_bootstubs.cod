; Listing generated by Microsoft (R) Optimizing Compiler Version 14.01.60511.01 

	TTL	C:\WINCE600\PLATFORM\Z2170P\SRC\BOOTLOADER\STUB\bsp_bootstubs.c
	CODE32

  00000			 AREA	 |.drectve|, DRECTVE
	DCB	"-defaultlib:LIBCMT "
	DCB	"-defaultlib:OLDNAMES "


  00000			 AREA	 |.rdata|, DATA, READONLY
|EdbgVendorIds| DCW 0x0
	DCW	0x0
	DCD	0x4033
	DCB	0x1
	DCB	"AD", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x4005
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x1050
	DCW	0x940
	DCD	0x2078
	DCB	0x1
	DCB	"LS", 0x0
	DCW	0x10ec
	DCW	0x8029
	DCD	0xc0f0
	DCB	0x1
	DCB	"KS", 0x0
	DCW	0x10ec
	DCW	0x8129
	DCD	0x0
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0x900b
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xd0c9
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x10ec
	DCW	0x8139
	DCD	0xe04c
	DCB	0x4
	DCB	"RT", 0x0
	DCW	0x1186
	DCW	0x1300
	DCD	0x50ba
	DCB	0x4
	DCB	"DL", 0x0
	DCW	0x100b
	DCW	0x20
	DCD	0xa0cc
	DCB	0x5
	DCB	"NG", 0x0
	DCW	0x10b7
	DCW	0x9050
	DCD	0x6008
	DCB	0x6
	DCB	"3C", 0x0
	DCW	0x10b7
	DCW	0x9200
	DCD	0x476
	DCB	0x6
	DCB	"3C", 0x0
	EXPORT	|INTERRUPTS_STATUS|
; File c:\wince600\platform\z2170p\src\bootloader\stub\bsp_bootstubs.c

  00000			 AREA	 |.pdata|, PDATA
|$T46319| DCD	|$LN5@INTERRUPTS|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |INTERRUPTS_STATUS| PROC

; 26   : {

  00000		 |$LN5@INTERRUPTS|
  00000		 |$M46316|

; 27   :     return FALSE;

  00000	e3a00000	 mov         r0, #0

; 28   : }

  00004	e12fff1e	 bx          lr
  00008		 |$M46317|

			 ENDP  ; |INTERRUPTS_STATUS|

	EXPORT	|CloseHandle|

  00000			 AREA	 |.pdata|, PDATA
|$T46328| DCD	|$LN5@CloseHandl|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |CloseHandle| PROC

; 71   : {

  00000		 |$LN5@CloseHandl|
  00000		 |$M46325|

; 72   :     UNREFERENCED_PARAMETER(hObject);
; 73   :     return TRUE;

  00000	e3a00001	 mov         r0, #1

; 74   : }

  00004	e12fff1e	 bx          lr
  00008		 |$M46326|

			 ENDP  ; |CloseHandle|

	EXPORT	|EnterCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T46335| DCD	|$LN5@EnterCriti|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |EnterCriticalSection| PROC

; 82   : {

  00000		 |$LN5@EnterCriti|
  00000		 |$M46332|

; 83   :     UNREFERENCED_PARAMETER(lpcs);
; 84   : }

  00000	e12fff1e	 bx          lr
  00004		 |$M46333|

			 ENDP  ; |EnterCriticalSection|

	EXPORT	|LeaveCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T46342| DCD	|$LN5@LeaveCriti|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |LeaveCriticalSection| PROC

; 92   : {

  00000		 |$LN5@LeaveCriti|
  00000		 |$M46339|

; 93   :     UNREFERENCED_PARAMETER(lpcs);
; 94   : }

  00000	e12fff1e	 bx          lr
  00004		 |$M46340|

			 ENDP  ; |LeaveCriticalSection|

	EXPORT	|InitializeCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T46349| DCD	|$LN5@Initialize|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |InitializeCriticalSection| PROC

; 103  : {

  00000		 |$LN5@Initialize|
  00000		 |$M46346|

; 104  :     UNREFERENCED_PARAMETER(lpcs);
; 105  : }

  00000	e12fff1e	 bx          lr
  00004		 |$M46347|

			 ENDP  ; |InitializeCriticalSection|

	EXPORT	|DeleteCriticalSection|

  00000			 AREA	 |.pdata|, PDATA
|$T46356| DCD	|$LN5@DeleteCrit|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |DeleteCriticalSection| PROC

; 111  : {

  00000		 |$LN5@DeleteCrit|
  00000		 |$M46353|

; 112  :     UNREFERENCED_PARAMETER(lpCriticalSection);
; 113  : }

  00000	e12fff1e	 bx          lr
  00004		 |$M46354|

			 ENDP  ; |DeleteCriticalSection|

	EXPORT	|SC_CreateMutex|

  00000			 AREA	 |.pdata|, PDATA
|$T46365| DCD	|$LN5@SC_CreateM|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |SC_CreateMutex| PROC

; 123  : {

  00000		 |$LN5@SC_CreateM|
  00000		 |$M46362|

; 124  :     UNREFERENCED_PARAMETER(lpsa);
; 125  :     UNREFERENCED_PARAMETER(bInitialOwner);
; 126  :     UNREFERENCED_PARAMETER(lpName);
; 127  :     return NULL;

  00000	e3a00000	 mov         r0, #0

; 128  : }

  00004	e12fff1e	 bx          lr
  00008		 |$M46363|

			 ENDP  ; |SC_CreateMutex|

	EXPORT	|SC_WaitForMultiple|

  00000			 AREA	 |.pdata|, PDATA
|$T46374| DCD	|$LN5@SC_WaitFor|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |SC_WaitForMultiple| PROC

; 139  : {

  00000		 |$LN5@SC_WaitFor|
  00000		 |$M46371|

; 140  :     UNREFERENCED_PARAMETER(cObjects);
; 141  :     UNREFERENCED_PARAMETER(lphObjects);
; 142  :     UNREFERENCED_PARAMETER(fWaitAll);
; 143  :     UNREFERENCED_PARAMETER(dwTimeout);
; 144  :     return 0;

  00000	e3a00000	 mov         r0, #0

; 145  : }

  00004	e12fff1e	 bx          lr
  00008		 |$M46372|

			 ENDP  ; |SC_WaitForMultiple|

	EXPORT	|SC_ReleaseMutex|

  00000			 AREA	 |.pdata|, PDATA
|$T46383| DCD	|$LN5@SC_Release|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |SC_ReleaseMutex| PROC

; 152  : {

  00000		 |$LN5@SC_Release|
  00000		 |$M46380|

; 153  :     UNREFERENCED_PARAMETER(hMutex);
; 154  :     return TRUE;

  00000	e3a00001	 mov         r0, #1

; 155  : }

  00004	e12fff1e	 bx          lr
  00008		 |$M46381|

			 ENDP  ; |SC_ReleaseMutex|

	EXPORT	|EnableDeviceClocks|
	IMPORT	|OALPAtoVA|

  00000			 AREA	 |.pdata|, PDATA
|$T46401| DCD	|$LN26@EnableDevi|
	DCD	0x40004d01
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |EnableDeviceClocks| PROC

; 165  : {

  00000		 |$LN26@EnableDevi|
  00000	e92d4010	 stmdb       sp!, {r4, lr}
  00004		 |$M46398|
  00004	e1a04001	 mov         r4, r1

; 166  :     OMAP_CM_REGS* pCmRegs;
; 167  : 
; 168  :     switch (devId)

  00008	e350000c	 cmp         r0, #0xC
  0000c	0a00002f	 beq         |$LN10@EnableDevi|
  00010	e3500015	 cmp         r0, #0x15
  00014	0a000017	 beq         |$LN15@EnableDevi|
  00018	e3500029	 cmp         r0, #0x29
  0001c	1a000041	 bne         |$LN6@EnableDevi|
  00020	e3a03312	 mov         r3, #0x12, 6

; 197  :                 }
; 198  :                 
; 199  :             break;
; 200  : 
; 201  :         case OMAP_DEVICE_GPIO1:
; 202  :             pCmRegs = OALPAtoUA(OMAP_PRCM_WKUP_CM_REGS_PA);

  00024	e3830b13	 orr         r0, r3, #0x13, 22
  00028	e3a01000	 mov         r1, #0
  0002c	eb000000	 bl          OALPAtoVA

; 203  :             if (bEnable)
; 204  :                 {                
; 205  :                 SETREG32(&pCmRegs->CM_FCLKEN_xxx, CM_CLKEN_GPIO1);

  00030	e5903000	 ldr         r3, [r0]
  00034	e3540000	 cmp         r4, #0
  00038	0a000009	 beq         |$LN4@EnableDevi|

; 206  :                 SETREG32(&pCmRegs->CM_ICLKEN_xxx, CM_CLKEN_GPIO1);

  0003c	e3833008	 orr         r3, r3, #8
  00040	e5803000	 str         r3, [r0]
  00044	e2802020	 add         r2, r0, #0x20
  00048	e5b03010	 ldr         r3, [r0, #0x10]!
  0004c	e3833008	 orr         r3, r3, #8
  00050	e5803000	 str         r3, [r0]
  00054		 |$LL3@EnableDevi|

; 207  :                 while (INREG32(&pCmRegs->CM_IDLEST1_xxx) & CM_IDLEST_ST_GPIO1);

  00054	e5923000	 ldr         r3, [r2]
  00058	e3130008	 tst         r3, #8
  0005c	1afffffc	 bne         |$LL3@EnableDevi|

; 208  :                 }
; 209  :             else

  00060	ea000030	 b           |$LN6@EnableDevi|
  00064		 |$LN4@EnableDevi|

; 210  :                 {
; 211  :                 CLRREG32(&pCmRegs->CM_FCLKEN_xxx, CM_CLKEN_GPIO1);
; 212  :                 CLRREG32(&pCmRegs->CM_ICLKEN_xxx, CM_CLKEN_GPIO1);

  00064	e3c33008	 bic         r3, r3, #8
  00068	e5803000	 str         r3, [r0]
  0006c	e5b03010	 ldr         r3, [r0, #0x10]!
  00070	e3c33008	 bic         r3, r3, #8

; 213  :                 }
; 214  :             break;

  00074	ea00002a	 b           |$LN23@EnableDevi|
  00078		 |$LN15@EnableDevi|
  00078	e3a03312	 mov         r3, #0x12, 6
  0007c	e3830c4a	 orr         r0, r3, #0x4A, 24
  00080	e3a01000	 mov         r1, #0
  00084	eb000000	 bl          OALPAtoVA
  00088	e5903000	 ldr         r3, [r0]
  0008c	e3540000	 cmp         r4, #0
  00090	0a000009	 beq         |$LN14@EnableDevi|
  00094	e3833401	 orr         r3, r3, #1, 8
  00098	e5803000	 str         r3, [r0]
  0009c	e2802020	 add         r2, r0, #0x20
  000a0	e5b03010	 ldr         r3, [r0, #0x10]!
  000a4	e3833401	 orr         r3, r3, #1, 8
  000a8	e5803000	 str         r3, [r0]
  000ac		 |$LL13@EnableDevi|
  000ac	e5923000	 ldr         r3, [r2]
  000b0	e3130401	 tst         r3, #1, 8
  000b4	1afffffc	 bne         |$LL13@EnableDevi|

; 169  :         {
; 170  :         case OMAP_DEVICE_MMC1:
; 171  :             pCmRegs = OALPAtoUA(OMAP_PRCM_CORE_CM_REGS_PA);
; 172  :             if (bEnable)
; 173  :                 {                
; 174  :                 SETREG32(&pCmRegs->CM_FCLKEN1_xxx, CM_CLKEN_MMC1);
; 175  :                 SETREG32(&pCmRegs->CM_ICLKEN1_xxx, CM_CLKEN_MMC1);
; 176  :                 while (INREG32(&pCmRegs->CM_IDLEST1_xxx) & CM_IDLEST_ST_MMC1);
; 177  :                 }
; 178  :             else

  000b8	ea00001a	 b           |$LN6@EnableDevi|
  000bc		 |$LN14@EnableDevi|

; 179  :                 {
; 180  :                 CLRREG32(&pCmRegs->CM_FCLKEN1_xxx, CM_CLKEN_MMC1);
; 181  :                 CLRREG32(&pCmRegs->CM_ICLKEN1_xxx, CM_CLKEN_MMC1);

  000bc	e3c33401	 bic         r3, r3, #1, 8
  000c0	e5803000	 str         r3, [r0]
  000c4	e5b03010	 ldr         r3, [r0, #0x10]!
  000c8	e3c33401	 bic         r3, r3, #1, 8

; 182  :                 }
; 183  :             break;

  000cc	ea000014	 b           |$LN23@EnableDevi|
  000d0		 |$LN10@EnableDevi|
  000d0	e3a03312	 mov         r3, #0x12, 6

; 184  : 
; 185  :         case OMAP_DEVICE_I2C1:
; 186  :             pCmRegs = OALPAtoUA(OMAP_PRCM_CORE_CM_REGS_PA);

  000d4	e3830c4a	 orr         r0, r3, #0x4A, 24
  000d8	e3a01000	 mov         r1, #0
  000dc	eb000000	 bl          OALPAtoVA

; 187  :             if (bEnable)
; 188  :                 {
; 189  :                 SETREG32(&pCmRegs->CM_FCLKEN1_xxx, CM_CLKEN_I2C1);

  000e0	e5903000	 ldr         r3, [r0]
  000e4	e3540000	 cmp         r4, #0
  000e8	0a000009	 beq         |$LN9@EnableDevi|

; 190  :                 SETREG32(&pCmRegs->CM_ICLKEN1_xxx, CM_CLKEN_I2C1);

  000ec	e3833902	 orr         r3, r3, #2, 18
  000f0	e5803000	 str         r3, [r0]
  000f4	e2802020	 add         r2, r0, #0x20
  000f8	e5b03010	 ldr         r3, [r0, #0x10]!
  000fc	e3833902	 orr         r3, r3, #2, 18
  00100	e5803000	 str         r3, [r0]
  00104		 |$LL8@EnableDevi|

; 191  :                 while (INREG32(&pCmRegs->CM_IDLEST1_xxx) & CM_IDLEST_ST_I2C1);

  00104	e5923000	 ldr         r3, [r2]
  00108	e3130902	 tst         r3, #2, 18
  0010c	1afffffc	 bne         |$LL8@EnableDevi|

; 192  :                 }
; 193  :             else

  00110	ea000004	 b           |$LN6@EnableDevi|
  00114		 |$LN9@EnableDevi|

; 194  :                 {
; 195  :                 CLRREG32(&pCmRegs->CM_FCLKEN1_xxx, CM_CLKEN_I2C1);
; 196  :                 CLRREG32(&pCmRegs->CM_ICLKEN1_xxx, CM_CLKEN_I2C1);

  00114	e3c33902	 bic         r3, r3, #2, 18
  00118	e5803000	 str         r3, [r0]
  0011c	e5b03010	 ldr         r3, [r0, #0x10]!
  00120	e3c33902	 bic         r3, r3, #2, 18
  00124		 |$LN23@EnableDevi|
  00124	e5803000	 str         r3, [r0]
  00128		 |$LN6@EnableDevi|

; 215  :          
; 216  :         }
; 217  :     return TRUE;

  00128	e3a00001	 mov         r0, #1

; 218  : }

  0012c	e8bd4010	 ldmia       sp!, {r4, lr}
  00130	e12fff1e	 bx          lr
  00134		 |$M46399|

			 ENDP  ; |EnableDeviceClocks|

	EXPORT	|PrcmDeviceGetContextState|

  00000			 AREA	 |.pdata|, PDATA
|$T46410| DCD	|$LN5@PrcmDevice|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |PrcmDeviceGetContextState| PROC

; 571  : {

  00000		 |$LN5@PrcmDevice|
  00000		 |$M46407|

; 572  :     UNREFERENCED_PARAMETER(devId);
; 573  :     UNREFERENCED_PARAMETER(bSet);
; 574  :     return TRUE;

  00000	e3a00001	 mov         r0, #1

; 575  : 
; 576  : }

  00004	e12fff1e	 bx          lr
  00008		 |$M46408|

			 ENDP  ; |PrcmDeviceGetContextState|

	EXPORT	|EnableDeviceClocksNoRefCount|

  00000			 AREA	 |.pdata|, PDATA
|$T46421| DCD	|$LN5@EnableDevi@2|
	DCD	0x40000401
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |EnableDeviceClocksNoRefCount| PROC

; 583  : {

  00000		 |$LN5@EnableDevi@2|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M46418|

; 584  : 	return EnableDeviceClocks( devId, bEnable );

  00004	eb000000	 bl          EnableDeviceClocks

; 585  : }

  00008	e49de004	 ldr         lr, [sp], #4
  0000c	e12fff1e	 bx          lr
  00010		 |$M46419|

			 ENDP  ; |EnableDeviceClocksNoRefCount|

	EXPORT	|BusClockRelease|

  00000			 AREA	 |.pdata|, PDATA
|$T46431| DCD	|$LN5@BusClockRe|
	DCD	0x40000601
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |BusClockRelease| PROC

; 592  : {

  00000		 |$LN5@BusClockRe|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M46428|
  00004	e1a00001	 mov         r0, r1

; 593  : //    RETAILMSG(1,(TEXT("clockrelease %d\r\n"),id));
; 594  :     UNREFERENCED_PARAMETER(hBus);
; 595  :     return EnableDeviceClocks(id,FALSE);

  00008	e3a01000	 mov         r1, #0
  0000c	eb000000	 bl          EnableDeviceClocks

; 596  : }

  00010	e49de004	 ldr         lr, [sp], #4
  00014	e12fff1e	 bx          lr
  00018		 |$M46429|

			 ENDP  ; |BusClockRelease|

	EXPORT	|BusClockRequest|

  00000			 AREA	 |.pdata|, PDATA
|$T46441| DCD	|$LN5@BusClockRe@2|
	DCD	0x40000601
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |BusClockRequest| PROC

; 603  : {

  00000		 |$LN5@BusClockRe@2|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M46438|
  00004	e1a00001	 mov         r0, r1

; 604  : //    RETAILMSG(1,(TEXT("clockrequest %d\r\n"),id));
; 605  :     UNREFERENCED_PARAMETER(hBus);
; 606  :     return EnableDeviceClocks(id,TRUE);

  00008	e3a01001	 mov         r1, #1
  0000c	eb000000	 bl          EnableDeviceClocks

; 607  : }

  00010	e49de004	 ldr         lr, [sp], #4
  00014	e12fff1e	 bx          lr
  00018		 |$M46439|

			 ENDP  ; |BusClockRequest|

	EXPORT	|MmUnmapIoSpace|

  00000			 AREA	 |.pdata|, PDATA
|$T46448| DCD	|$LN5@MmUnmapIoS|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |MmUnmapIoSpace| PROC

; 613  : {

  00000		 |$LN5@MmUnmapIoS|
  00000		 |$M46445|

; 614  :     UNREFERENCED_PARAMETER(BaseAddress);
; 615  :     UNREFERENCED_PARAMETER(NumberOfBytes);
; 616  : }

  00000	e12fff1e	 bx          lr
  00004		 |$M46446|

			 ENDP  ; |MmUnmapIoSpace|

	EXPORT	|MmMapIoSpace|

  00000			 AREA	 |.pdata|, PDATA
|$T46459| DCD	|$LN5@MmMapIoSpa|
	DCD	0x40000501
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |MmMapIoSpace| PROC

; 623  : {

  00000		 |$LN5@MmMapIoSpa|
  00000	e52de004	 str         lr, [sp, #-4]!
  00004		 |$M46456|

; 624  :     UNREFERENCED_PARAMETER(NumberOfBytes);
; 625  :     return OALPAtoVA(PhysicalAddress.LowPart,CacheEnable);

  00004	e1a01003	 mov         r1, r3
  00008	eb000000	 bl          OALPAtoVA

; 626  : }

  0000c	e49de004	 ldr         lr, [sp], #4
  00010	e12fff1e	 bx          lr
  00014		 |$M46457|

			 ENDP  ; |MmMapIoSpace|

	EXPORT	|CreateBusAccessHandle|

  00000			 AREA	 |.pdata|, PDATA
|$T46468| DCD	|$LN5@CreateBusA|
	DCD	0x40000200
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |CreateBusAccessHandle| PROC

; 631  : {    

  00000		 |$LN5@CreateBusA|
  00000		 |$M46465|

; 632  :     UNREFERENCED_PARAMETER(lpActiveRegPath);
; 633  :     return (HANDLE) 0xAA;

  00000	e3a000aa	 mov         r0, #0xAA

; 634  : }

  00004	e12fff1e	 bx          lr
  00008		 |$M46466|

			 ENDP  ; |CreateBusAccessHandle|

	EXPORT	|HalContextUpdateDirtyRegister|

  00000			 AREA	 |.pdata|, PDATA
|$T46475| DCD	|$LN5@HalContext|
	DCD	0x40000100
; Function compile flags: /Ogspy

  00000			 AREA	 |.text|, CODE, ARM

  00000		 |HalContextUpdateDirtyRegister| PROC

; 640  : {

  00000		 |$LN5@HalContext|
  00000		 |$M46472|

; 641  :     UNREFERENCED_PARAMETER(ffRegister);
; 642  : }

  00000	e12fff1e	 bx          lr
  00004		 |$M46473|

			 ENDP  ; |HalContextUpdateDirtyRegister|

	END
